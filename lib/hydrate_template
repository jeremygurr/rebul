# usage: cat file | hydrate_template >output
#   will replace bash variables and expressions
hydrate_template() {
while IFS= read -r line || [ "$line" ]; do
  if [[ "$line" =~ \$ ]]; then
    line="${line//\"/\\\"}"
    eval "echo \"$line\"" || return 1
  else
    echo "$line"
  fi
done
}
